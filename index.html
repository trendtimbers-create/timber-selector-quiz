<!DOCTYPE html>
<html lang="en-AU">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Australian Timber Selector Quiz</title>
    <style>
        :root {
            --primary-green: #055902;
            --secondary-tan: #c5aa7f;
            --light-bg: #f5f5f0;
            --white: #ffffff;
            --text-dark: #2c3e2f;
            --text-light: #6b7c6e;
            --border: #d4c4a8;
            --success: #4caf50;
            --shadow: rgba(0, 0, 0, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--light-bg) 0%, #e8e3d6 100%);
            color: var(--text-dark);
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            padding: 30px 20px;
            background: var(--white);
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 4px 6px var(--shadow);
        }

        .header h1 {
            color: var(--primary-green);
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            color: var(--text-light);
            font-size: 1.1em;
        }

        .progress-container {
            background: var(--white);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 2px 4px var(--shadow);
        }

        .progress-bar {
            width: 100%;
            height: 12px;
            background: var(--light-bg);
            border-radius: 6px;
            overflow: hidden;
            margin-top: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-green) 0%, var(--secondary-tan) 100%);
            transition: width 0.3s ease;
            border-radius: 6px;
        }

        .question-card {
            background: var(--white);
            border-radius: 15px;
            padding: 40px;
            box-shadow: 0 4px 8px var(--shadow);
            margin-bottom: 20px;
            animation: fadeIn 0.4s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .question-card h2 {
            color: var(--primary-green);
            font-size: 1.8em;
            margin-bottom: 25px;
        }

        .options {
            display: grid;
            gap: 15px;
        }

        .option-btn {
            background: var(--white);
            border: 2px solid var(--border);
            padding: 20px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
            font-size: 1em;
            color: var(--text-dark);
        }

        .option-btn:hover {
            border-color: var(--secondary-tan);
            transform: translateX(5px);
            box-shadow: 0 2px 8px var(--shadow);
        }

        .option-btn.selected {
            background: var(--primary-green);
            color: var(--white);
            border-color: var(--primary-green);
        }

        .nav-buttons {
            display: flex;
            gap: 15px;
            justify-content: space-between;
            margin-top: 30px;
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .btn-primary {
            background: var(--primary-green);
            color: var(--white);
        }

        .btn-primary:hover {
            background: #044501;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px var(--shadow);
        }

        .btn-secondary {
            background: var(--secondary-tan);
            color: var(--white);
        }

        .btn-secondary:hover {
            background: #b39a70;
            transform: translateY(-2px);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .hidden {
            display: none;
        }

        .results-section {
            animation: fadeIn 0.6s ease;
        }

        .result-card {
            background: var(--white);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 25px;
            box-shadow: 0 4px 8px var(--shadow);
            border-left: 5px solid var(--primary-green);
        }

        .result-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .result-title {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .rank-badge {
            background: var(--primary-green);
            color: var(--white);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2em;
        }

        .timber-name {
            font-size: 1.8em;
            color: var(--primary-green);
            font-weight: bold;
        }

        .budget-badge {
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9em;
        }

        .budget-budget {
            background: #e3f2fd;
            color: #1565c0;
        }

        .budget-value {
            background: #f1f8e9;
            color: #558b2f;
        }

        .budget-premium {
            background: #fff3e0;
            color: #e65100;
        }

        .budget-luxury {
            background: #fce4ec;
            color: #c2185b;
        }

        .match-score {
            margin: 20px 0;
        }

        .match-percentage {
            font-size: 2em;
            color: var(--primary-green);
            font-weight: bold;
            margin-bottom: 10px;
        }

        .match-bar {
            width: 100%;
            height: 20px;
            background: var(--light-bg);
            border-radius: 10px;
            overflow: hidden;
        }

        .match-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--success) 0%, var(--primary-green) 100%);
            transition: width 1s ease;
        }

        .properties-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 25px 0;
        }

        .property-item {
            background: var(--light-bg);
            padding: 15px;
            border-radius: 8px;
        }

        .property-label {
            font-weight: 600;
            color: var(--text-light);
            font-size: 0.9em;
            margin-bottom: 5px;
        }

        .property-value {
            color: var(--text-dark);
            font-size: 1.1em;
        }

        .explanation-section {
            background: #f9f9f7;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid var(--secondary-tan);
        }

        .explanation-section h3 {
            color: var(--primary-green);
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .explanation-section p {
            color: var(--text-dark);
            line-height: 1.8;
            margin-bottom: 10px;
        }

        .explanation-section ul {
            margin-left: 20px;
            margin-top: 10px;
        }

        .explanation-section li {
            margin-bottom: 8px;
            color: var(--text-dark);
        }

        .comparison-section {
            background: #fffbf5;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid var(--primary-green);
        }

        .comparison-section h3 {
            color: var(--primary-green);
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .feature-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 20px 0;
        }

        .feature-tag {
            background: var(--secondary-tan);
            color: var(--white);
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9em;
        }

        .validation-panel {
            background: var(--white);
            border-radius: 15px;
            padding: 30px;
            margin-top: 40px;
            box-shadow: 0 4px 8px var(--shadow);
            border: 3px solid var(--primary-green);
        }

        .validation-panel h2 {
            color: var(--primary-green);
            font-size: 2em;
            margin-bottom: 25px;
            text-align: center;
        }

        .requirements-summary {
            background: var(--light-bg);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
        }

        .requirements-summary h3 {
            color: var(--primary-green);
            margin-bottom: 15px;
        }

        .requirement-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid var(--border);
        }

        .requirement-item:last-child {
            border-bottom: none;
        }

        .requirement-label {
            font-weight: 600;
            color: var(--text-dark);
        }

        .requirement-value {
            color: var(--text-light);
        }

        .compatibility-matrix {
            overflow-x: auto;
            margin: 25px 0;
        }

        .matrix-table {
            width: 100%;
            border-collapse: collapse;
            min-width: 600px;
        }

        .matrix-table th,
        .matrix-table td {
            padding: 12px;
            text-align: center;
            border: 1px solid var(--border);
        }

        .matrix-table th {
            background: var(--primary-green);
            color: var(--white);
            font-weight: 600;
        }

        .matrix-table tr:nth-child(even) {
            background: var(--light-bg);
        }

        .match-icon {
            font-size: 1.5em;
        }

        .match-full {
            color: var(--success);
        }

        .match-partial {
            color: var(--secondary-tan);
        }

        .match-none {
            color: #e74c3c;
        }

        .scoring-explanation {
            background: #f9f9f7;
            padding: 20px;
            border-radius: 10px;
            margin: 25px 0;
        }

        .scoring-explanation h3 {
            color: var(--primary-green);
            margin-bottom: 15px;
        }

        .scoring-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
        }

        .timber-icon {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }

            .question-card {
                padding: 25px;
            }

            .result-card {
                padding: 20px;
            }

            .properties-grid {
                grid-template-columns: 1fr;
            }

            .nav-buttons {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🪵 Australian Timber Selector</h1>
            <p>Find the perfect timber for your woodworking project</p>
        </div>

        <div id="progressSection" class="progress-container hidden">
            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                <span>Progress</span>
                <span id="progressText">Question 1 of 6</span>
            </div>
            <div class="progress-bar">
                <div id="progressFill" class="progress-fill" style="width: 0%"></div>
            </div>
        </div>

        <div id="quizSection"></div>
        <div id="resultsSection" class="hidden"></div>
    </div>

    <script>
        const timberData = {
            "tasmanian-oak": {
                species: "Tasmanian Oak",
                colour: "Light",
                colourDescription: "Pale cream to light blonde tones with subtle pink undertones",
                grainCharacter: "Subtle",
                workability: "Excellent",
                finishQuality: "Very Good",
                projectTypes: ["fine-furniture", "cabinets"],
                experienceLevel: ["beginner", "intermediate"],
                finishTypes: ["stained", "painted"],
                features: ["Excellent for staining", "Even grain pattern", "Good dimensional stability"],
                whyGood: "Perfect for painted or stained pieces with its clean, even grain pattern and excellent workability.",
                density: 650,
                hardness: 4.9,
                budgetCategory: "budget"
            },
            "jarrah": {
                species: "Jarrah",
                colour: "Dark",
                colourDescription: "Rich red to reddish-brown, ranging from light red to deep brick red, darkens with age",
                grainCharacter: "Moderate",
                workability: "Good",
                finishQuality: "Excellent",
                projectTypes: ["fine-furniture", "cabinets"],
                experienceLevel: ["intermediate", "advanced"],
                finishTypes: ["natural", "stained"],
                features: ["Termite resistant", "Fire resistant", "Very durable"],
                whyGood: "Exceptional durability and natural resistance make it perfect for high-quality furniture that will last generations.",
                density: 835,
                hardness: 8.5,
                budgetCategory: "value"
            },
            "american-oak": {
                species: "American Oak",
                colour: "Light",
                colourDescription: "Pale blonde to light golden brown with warm undertones",
                grainCharacter: "Moderate",
                workability: "Excellent",
                finishQuality: "Excellent",
                projectTypes: ["fine-furniture", "cabinets"],
                experienceLevel: ["beginner", "intermediate", "advanced"],
                finishTypes: ["natural", "stained"],
                features: ["Traditional furniture wood", "Excellent steam bending", "Prominent grain pattern"],
                whyGood: "The classic choice for traditional furniture with beautiful grain patterns and superior steam bending properties.",
                density: 750,
                hardness: 6.0,
                budgetCategory: "value"
            },
            "tasmanian-blackwood": {
                species: "Tasmanian Blackwood",
                colour: "Dark",
                colourDescription: "Deep chocolate brown to golden brown with darker streaks, can have reddish tones",
                grainCharacter: "Dramatic",
                workability: "Good",
                finishQuality: "Excellent",
                projectTypes: ["fine-furniture", "small-items", "turned-items"],
                experienceLevel: ["intermediate", "advanced"],
                finishTypes: ["natural"],
                features: ["Fiddleback figure available", "Lustrous finish", "Premium appearance"],
                whyGood: "Premium Australian timber with stunning grain patterns, perfect for high-end pieces and heirloom furniture.",
                density: 640,
                hardness: 5.9,
                budgetCategory: "premium"
            },
            "new-guinea-rosewood": {
                species: "New Guinea Rosewood",
                colour: "Medium",
                colourDescription: "Golden honey to warm amber with natural lustre",
                grainCharacter: "Dramatic",
                workability: "Good",
                finishQuality: "Excellent",
                projectTypes: ["fine-furniture", "small-items"],
                experienceLevel: ["intermediate", "advanced"],
                finishTypes: ["natural"],
                features: ["Exotic appearance", "Natural oils", "Golden lustre"],
                whyGood: "Exotic timber with natural oils and stunning golden appearance, perfect for standout pieces.",
                density: 650,
                hardness: 4.7,
                budgetCategory: "premium"
            },
            "nsw-spotted-gum": {
                species: "NSW Spotted Gum",
                colour: "Medium",
                colourDescription: "Light to medium brown with grey undertones and natural colour variation",
                grainCharacter: "Moderate",
                workability: "Good",
                finishQuality: "Excellent",
                projectTypes: ["fine-furniture", "cabinets"],
                experienceLevel: ["intermediate", "advanced"],
                finishTypes: ["natural", "stained"],
                features: ["Excellent termite resistance", "Fire resistant", "High strength"],
                whyGood: "Exceptional durability and strength make it ideal for heavy-duty furniture and high-traffic pieces.",
                density: 950,
                hardness: 11.0,
                budgetCategory: "value"
            },
            "sydney-blue-gum": {
                species: "Sydney Blue Gum",
                colour: "Medium",
                colourDescription: "Medium pink to reddish brown with distinct colour variation",
                grainCharacter: "Moderate",
                workability: "Good",
                finishQuality: "Very Good",
                projectTypes: ["fine-furniture", "cabinets"],
                experienceLevel: ["intermediate"],
                finishTypes: ["natural", "stained"],
                features: ["Easy to work", "Versatile", "Good strength"],
                whyGood: "Versatile Australian hardwood that offers good workability and attractive grain for various furniture projects.",
                density: 840,
                hardness: 8.1,
                budgetCategory: "value"
            },
            "nsw-blackbutt": {
                species: "NSW Blackbutt",
                colour: "Light",
                colourDescription: "Pale blonde to light golden brown, even colour",
                grainCharacter: "Moderate",
                workability: "Good",
                finishQuality: "Excellent",
                projectTypes: ["fine-furniture", "cabinets"],
                experienceLevel: ["intermediate", "advanced"],
                finishTypes: ["natural", "stained"],
                features: ["Termite resistant", "Fire resistant", "Fast growth"],
                whyGood: "Sustainable and durable Australian hardwood with excellent resistance properties and attractive appearance.",
                density: 930,
                hardness: 8.9,
                budgetCategory: "value"
            },
            "canadian-rock-maple": {
                species: "Canadian Rock Maple",
                colour: "Light",
                colourDescription: "Creamy white to pale blonde with subtle grain",
                grainCharacter: "Subtle",
                workability: "Excellent",
                finishQuality: "Very Good",
                projectTypes: ["kitchen-items", "turned-items"],
                experienceLevel: ["beginner", "intermediate", "advanced"],
                finishTypes: ["natural", "stained"],
                features: ["Food safe", "Fine even texture", "Excellent for detailed work"],
                whyGood: "Perfect for kitchen items and detailed work with superior workability and food-safe properties.",
                density: 705,
                hardness: 6.45,
                budgetCategory: "value"
            },
            "fijian-mahogany": {
                species: "Fijian Mahogany",
                colour: "Dark",
                colourDescription: "Reddish-brown to deep brown with warm mahogany tones",
                grainCharacter: "Moderate",
                workability: "Excellent",
                finishQuality: "Very Good",
                projectTypes: ["cabinets", "turned-items"],
                experienceLevel: ["beginner", "intermediate"],
                finishTypes: ["natural", "stained"],
                features: ["Sustainable plantation grown", "Traditional mahogany look", "Excellent workability"],
                whyGood: "Sustainable alternative to traditional mahogany with excellent workability and classic appearance.",
                density: 570,
                hardness: 3.6,
                budgetCategory: "value"
            },
            "european-beech": {
                species: "European Beech",
                colour: "Light",
                colourDescription: "Pale cream to light pinkish-brown",
                grainCharacter: "Subtle",
                workability: "Excellent",
                finishQuality: "Good",
                projectTypes: ["fine-furniture", "turned-items"],
                experienceLevel: ["intermediate", "advanced"],
                finishTypes: ["stained", "painted"],
                features: ["Superior steam bending", "Fine uniform texture", "Traditional chair making"],
                whyGood: "Ideal for bent furniture and traditional chair making with superior steam bending properties.",
                density: 710,
                hardness: 6.46,
                budgetCategory: "value"
            },
            "american-black-walnut": {
                species: "American Black Walnut",
                colour: "Dark",
                colourDescription: "Rich chocolate brown to deep purplish-brown, straight grain beauty",
                grainCharacter: "Moderate",
                workability: "Excellent",
                finishQuality: "Premium",
                projectTypes: ["fine-furniture", "small-items"],
                experienceLevel: ["intermediate", "advanced"],
                finishTypes: ["natural"],
                features: ["Luxury timber", "Ages beautifully", "Excellent workability"],
                whyGood: "The gold standard for luxury furniture and heirloom pieces with unmatched beauty and workability.",
                density: 610,
                hardness: 4.49,
                budgetCategory: "luxury"
            },
            "ironbark": {
                species: "Ironbark",
                colour: "Dark",
                colourDescription: "Deep dark red to red-brown, very dense appearance",
                grainCharacter: "Subtle",
                workability: "Difficult",
                finishQuality: "Good",
                projectTypes: ["fine-furniture"],
                experienceLevel: ["advanced"],
                finishTypes: ["natural"],
                features: ["Extremely hard", "Exceptional durability", "High strength"],
                whyGood: "Exceptionally hard and durable timber for demanding applications requiring maximum strength and longevity.",
                density: 1106,
                hardness: 16.0,
                budgetCategory: "value"
            },
            "camphor-laurel": {
                species: "Camphor Laurel",
                colour: "Light",
                colourDescription: "Light golden-brown to pale yellow with subtle figure",
                grainCharacter: "Moderate",
                workability: "Good",
                finishQuality: "Good",
                projectTypes: ["small-items", "carved-projects"],
                experienceLevel: ["intermediate"],
                finishTypes: ["natural"],
                features: ["Natural pest resistance", "Anti-bacterial properties", "Unique appearance"],
                whyGood: "Natural pest resistance makes it perfect for storage boxes and chests with unique character.",
                density: 790,
                hardness: 5.5,
                budgetCategory: "value"
            },
            "american-black-cherry": {
                species: "American Black Cherry",
                colour: "Dark",
                colourDescription: "Light reddish-brown ageing to rich deep red-brown over time",
                grainCharacter: "Subtle",
                workability: "Excellent",
                finishQuality: "Premium",
                projectTypes: ["fine-furniture", "small-items", "carved-projects"],
                experienceLevel: ["intermediate", "advanced"],
                finishTypes: ["natural"],
                features: ["Darkens beautifully with age", "Excellent for carving", "Premium finish quality"],
                whyGood: "Ages to a rich, deep colour and offers exceptional carving properties for fine furniture pieces.",
                density: 680,
                hardness: 4.5,
                budgetCategory: "premium"
            },
            "silky-oak": {
                species: "Silky Oak",
                colour: "Medium",
                colourDescription: "Pinkish to reddish-brown with distinctive silvery grain",
                grainCharacter: "Dramatic",
                workability: "Good",
                finishQuality: "Very Good",
                projectTypes: ["fine-furniture", "small-items"],
                experienceLevel: ["intermediate", "advanced"],
                finishTypes: ["natural"],
                features: ["Distinctive silver grain", "Lightweight for strength", "Unique appearance"],
                whyGood: "Distinctive silvery grain creates stunning visual interest perfect for feature furniture pieces.",
                density: 580,
                hardness: 5.5,
                budgetCategory: "value"
            }
        };

        const questionLabels = {
            project: {
                "fine-furniture": "Fine Furniture (tables, chairs, cabinets)",
                "cabinets": "Cabinets & Storage",
                "kitchen-items": "Kitchen Items (boards, utensils)",
                "small-items": "Small Items & Boxes",
                "turned-items": "Turned Items (bowls, pens)",
                "carved-projects": "Carved Projects"
            },
            budget: {
                "tight-budget": "Budget-conscious - most affordable options",
                "value-focused": "Value-focused - balance of cost and quality",
                "quality-focused": "Quality-focused - premium materials",
                "perfect-wood": "Find the perfect wood regardless of cost"
            },
            colour: {
                "light": "Light Woods - Cream, blonde, pale tones",
                "medium": "Medium Tones - Golden, honey, light brown",
                "dark": "Dark Woods - Rich reds, deep browns, chocolate"
            },
            grain: {
                "subtle": "Subtle Grain - Clean, uniform appearance",
                "moderate": "Moderate Grain - Visible character",
                "dramatic": "Dramatic Grain - Bold patterns and figured wood"
            },
            experience: {
                "beginner": "Beginner - new to woodworking",
                "intermediate": "Intermediate - comfortable with tools",
                "advanced": "Advanced - experienced craftsperson"
            },
            finish: {
                "natural": "Natural/Oil finish - show the wood's character",
                "stained": "Stained - enhance or change colour",
                "painted": "Painted - opaque colour finish"
            }
        };

        const questions = [
            {
                id: 'project',
                question: 'What type of project are you working on?',
                options: [
                    { value: 'fine-furniture', label: questionLabels.project['fine-furniture'] },
                    { value: 'cabinets', label: questionLabels.project['cabinets'] },
                    { value: 'kitchen-items', label: questionLabels.project['kitchen-items'] },
                    { value: 'small-items', label: questionLabels.project['small-items'] },
                    { value: 'turned-items', label: questionLabels.project['turned-items'] },
                    { value: 'carved-projects', label: questionLabels.project['carved-projects'] }
                ]
            },
            {
                id: 'budget',
                question: "What's your budget priority?",
                options: [
                    { value: 'tight-budget', label: questionLabels.budget['tight-budget'] },
                    { value: 'value-focused', label: questionLabels.budget['value-focused'] },
                    { value: 'quality-focused', label: questionLabels.budget['quality-focused'] },
                    { value: 'perfect-wood', label: questionLabels.budget['perfect-wood'] }
                ]
            },
            {
                id: 'colour',
                question: 'What colour timber do you prefer?',
                options: [
                    { value: 'light', label: questionLabels.colour['light'] },
                    { value: 'medium', label: questionLabels.colour['medium'] },
                    { value: 'dark', label: questionLabels.colour['dark'] }
                ]
            },
            {
                id: 'grain',
                question: 'What grain character appeals to you?',
                options: [
                    { value: 'subtle', label: questionLabels.grain['subtle'] },
                    { value: 'moderate', label: questionLabels.grain['moderate'] },
                    { value: 'dramatic', label: questionLabels.grain['dramatic'] }
                ]
            },
            {
                id: 'experience',
                question: 'What is your woodworking experience level?',
                options: [
                    { value: 'beginner', label: questionLabels.experience['beginner'] },
                    { value: 'intermediate', label: questionLabels.experience['intermediate'] },
                    { value: 'advanced', label: questionLabels.experience['advanced'] }
                ]
            },
            {
                id: 'finish',
                question: 'What type of finish will you use?',
                options: [
                    { value: 'natural', label: questionLabels.finish['natural'] },
                    { value: 'stained', label: questionLabels.finish['stained'] },
                    { value: 'painted', label: questionLabels.finish['painted'] }
                ]
            }
        ];

        let currentQuestion = 0;
        let answers = {};

        function startQuiz() {
            currentQuestion = 0;
            answers = {};
            document.getElementById('progressSection').classList.remove('hidden');
            showQuestion();
        }

        function showQuestion() {
            const question = questions[currentQuestion];
            const progress = ((currentQuestion + 1) / questions.length) * 100;
            
            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('progressText').textContent = `Question ${currentQuestion + 1} of ${questions.length}`;

            const quizSection = document.getElementById('quizSection');
            quizSection.innerHTML = `
                <div class="question-card">
                    <h2>${question.question}</h2>
                    <div class="options">
                        ${question.options.map(option => `
                            <button class="option-btn" onclick="selectAnswer('${question.id}', '${option.value}')">
                                ${option.label}
                            </button>
                        `).join('')}
                    </div>
                    <div class="nav-buttons">
                        <button class="btn btn-secondary" onclick="previousQuestion()" ${currentQuestion === 0 ? 'disabled' : ''}>
                            ← Previous
                        </button>
                        <button class="btn btn-primary" id="nextBtn" onclick="nextQuestion()" disabled>
                            ${currentQuestion === questions.length - 1 ? 'See Results' : 'Next →'}
                        </button>
                    </div>
                </div>
            `;

            if (answers[question.id]) {
                highlightSelectedOption(question.id, answers[question.id]);
            }
        }

        function selectAnswer(questionId, value) {
            answers[questionId] = value;
            highlightSelectedOption(questionId, value);
            document.getElementById('nextBtn').disabled = false;
        }

        function highlightSelectedOption(questionId, value) {
            const buttons = document.querySelectorAll('.option-btn');
            buttons.forEach(btn => {
                btn.classList.remove('selected');
                if (btn.textContent.trim() === questionLabels[questionId][value]) {
                    btn.classList.add('selected');
                }
            });
        }

        function nextQuestion() {
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                showQuestion();
            } else {
                calculateResults();
            }
        }

        function previousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                showQuestion();
            }
        }

        function calculateResults() {
            const scores = [];

            for (const [timberId, timber] of Object.entries(timberData)) {
                let score = 0;
                const breakdown = {};

                // Project type (40 points)
                if (timber.projectTypes.includes(answers.project)) {
                    score += 40;
                    breakdown.project = 40;
                } else if (
                    (answers.project === 'fine-furniture' && timber.projectTypes.includes('cabinets')) ||
                    (answers.project === 'cabinets' && timber.projectTypes.includes('fine-furniture'))
                ) {
                    score += 20;
                    breakdown.project = 20;
                } else {
                    breakdown.project = 0;
                }

                // Budget (25 points)
                if (answers.budget === 'tight-budget' && timber.budgetCategory === 'budget') {
                    score += 25;
                    breakdown.budget = 25;
                } else if (answers.budget === 'value-focused' && (timber.budgetCategory === 'budget' || timber.budgetCategory === 'value')) {
                    score += 25;
                    breakdown.budget = 25;
                } else if (answers.budget === 'quality-focused' && (timber.budgetCategory === 'premium' || timber.budgetCategory === 'value')) {
                    score += 25;
                    breakdown.budget = 25;
                } else if (answers.budget === 'perfect-wood') {
                    score += 15;
                    breakdown.budget = 15;
                } else if (timber.budgetCategory === 'value') {
                    score += 15;
                    breakdown.budget = 15;
                } else {
                    breakdown.budget = 0;
                }

                // Colour (15 points)
                if (timber.colour.toLowerCase() === answers.colour) {
                    score += 15;
                    breakdown.colour = 15;
                } else {
                    breakdown.colour = 0;
                }

                // Grain character (10 points)
                if (timber.grainCharacter.toLowerCase() === answers.grain) {
                    score += 10;
                    breakdown.grain = 10;
                } else {
                    breakdown.grain = 0;
                }

                // Experience level (5 points)
                if (timber.experienceLevel.includes(answers.experience)) {
                    score += 5;
                    breakdown.experience = 5;
                } else {
                    breakdown.experience = 0;
                }

                // Finish type (5 points)
                if (timber.finishTypes.includes(answers.finish)) {
                    score += 5;
                    breakdown.finish = 5;
                } else {
                    breakdown.finish = 0;
                }

                scores.push({
                    timberId,
                    timber,
                    score,
                    percentage: Math.round((score / 100) * 100),
                    breakdown
                });
            }

            // Sort by score
            scores.sort((a, b) => b.score - a.score);

            // Filter to show top matches (at least 70% match)
            const topMatches = scores.filter(s => s.percentage >= 70).slice(0, 5);
            
            // If less than 3 results with 70%+, show top 5 regardless
            const resultsToShow = topMatches.length >= 3 ? topMatches : scores.slice(0, 5);

            displayResults(resultsToShow, scores);
        }

        function displayResults(results, allScores) {
            document.getElementById('progressSection').classList.add('hidden');
            document.getElementById('quizSection').classList.add('hidden');
            
            const resultsSection = document.getElementById('resultsSection');
            resultsSection.classList.remove('hidden');

            let html = '<div class="results-section">';
            html += '<div class="header"><h1>Your Perfect Timber Matches</h1><p>Based on your project requirements</p></div>';

            results.forEach((result, index) => {
                const rankSuffix = index === 0 ? 'st' : index === 1 ? 'nd' : index === 2 ? 'rd' : 'th';
                html += generateResultCard(result, index + 1, rankSuffix, results, allScores);
            });

            html += generateValidationPanel(results, allScores);
            html += '</div>';

            resultsSection.innerHTML = html;

            // Animate match bars
            setTimeout(() => {
                document.querySelectorAll('.match-bar-fill').forEach(bar => {
                    const width = bar.getAttribute('data-width');
                    bar.style.width = width + '%';
                });
            }, 100);
        }

        function generateResultCard(result, rank, rankSuffix, allResults, allScores) {
            const { timber, percentage, breakdown } = result;
            
            const whyThisMatches = generateWhyThisMatches(result);
            const comparison = generateComparison(result, allResults, allScores, rank);

            return `
                <div class="result-card">
                    <div class="result-header">
                        <div class="result-title">
                            <div class="rank-badge">${rank}${rankSuffix}</div>
                            <div>
                                <div class="timber-icon">🪵</div>
                                <div class="timber-name">${timber.species}</div>
                            </div>
                        </div>
                        <div class="budget-badge budget-${timber.budgetCategory}">
                            ${timber.budgetCategory.charAt(0).toUpperCase() + timber.budgetCategory.slice(1)}
                        </div>
                    </div>

                    <div class="match-score">
                        <div class="match-percentage">${percentage}% Match</div>
                        <div class="match-bar">
                            <div class="match-bar-fill" data-width="${percentage}" style="width: 0%"></div>
                        </div>
                    </div>

                    <div class="properties-grid">
                        <div class="property-item">
                            <div class="property-label">Colour</div>
                            <div class="property-value">${timber.colour}</div>
                        </div>
                        <div class="property-item">
                            <div class="property-label">Workability</div>
                            <div class="property-value">${timber.workability}</div>
                        </div>
                        <div class="property-item">
                            <div class="property-label">Finish Quality</div>
                            <div class="property-value">${timber.finishQuality}</div>
                        </div>
                        <div class="property-item">
                            <div class="property-label">Grain Character</div>
                            <div class="property-value">${timber.grainCharacter}</div>
                        </div>
                    </div>

                    <div class="explanation-section">
                        <h3>🎯 Why This Timber Matches Your Needs</h3>
                        ${whyThisMatches}
                    </div>

                    ${comparison}

                    <div class="feature-tags">
                        ${timber.features.map(f => `<div class="feature-tag">${f}</div>`).join('')}
                    </div>

                    <div style="margin-top: 20px; padding: 15px; background: var(--light-bg); border-radius: 8px;">
                        <p style="font-size: 0.95em; color: var(--text-light); margin: 0;">
                            <strong>Colour Details:</strong> ${timber.colourDescription}
                        </p>
                        <p style="font-size: 0.9em; color: var(--text-light); margin-top: 10px;">
                            <strong>Technical:</strong> Density ${timber.density} kg/m³ | Janka Hardness ${timber.hardness}
                        </p>
                    </div>
                </div>
            `;
        }

        function generateWhyThisMatches(result) {
            const { timber, breakdown } = result;
            let explanations = [];

            // Project type explanation
            if (breakdown.project >= 20) {
                const projectLabel = questionLabels.project[answers.project];
                if (breakdown.project === 40) {
                    explanations.push(`<strong>Perfect Project Match:</strong> You selected "${projectLabel}", and ${timber.species} is specifically ideal for this type of work. ${timber.whyGood}`);
                } else {
                    explanations.push(`<strong>Good Project Fit:</strong> You selected "${projectLabel}", and ${timber.species} works well for similar applications. ${timber.whyGood}`);
                }
            }

            // Budget explanation
            if (breakdown.budget >= 15) {
                const budgetLabel = questionLabels.budget[answers.budget];
                const budgetExplanation = {
                    'tight-budget': `your budget-conscious approach aligns perfectly with this ${timber.budgetCategory} timber, giving you excellent value`,
                    'value-focused': `this ${timber.budgetCategory} timber offers the perfect balance of cost and quality you're looking for`,
                    'quality-focused': `this ${timber.budgetCategory} timber delivers the premium quality you prioritize`,
                    'perfect-wood': `this ${timber.budgetCategory} timber represents an excellent choice regardless of budget considerations`
                };
                explanations.push(`<strong>Budget Alignment:</strong> ${budgetExplanation[answers.budget]}.`);
            }

            // Colour explanation
            if (breakdown.colour === 15) {
                const colourLabel = questionLabels.colour[answers.colour].split(' - ')[0];
                explanations.push(`<strong>Colour Perfect Match:</strong> The ${colourLabel.toLowerCase()} you prefer matches beautifully with ${timber.species}'s ${timber.colourDescription}.`);
            }

            // Grain explanation
            if (breakdown.grain === 10) {
                const grainLabel = questionLabels.grain[answers.grain].split(' - ')[0];
                explanations.push(`<strong>Grain Character:</strong> The ${grainLabel.toLowerCase()} grain pattern you selected perfectly aligns with this timber's ${timber.grainCharacter.toLowerCase()} grain character.`);
            }

            // Experience explanation
            if (breakdown.experience === 5) {
                const expLabel = questionLabels.experience[answers.experience];
                const workabilityNote = timber.workability === 'Excellent' ? 'very easy to work with' : 
                                       timber.workability === 'Good' ? 'manageable with proper technique' : 
                                       'suitable for your skill level';
                explanations.push(`<strong>Skill Level Match:</strong> As a ${expLabel.toLowerCase()}, you'll find this timber ${workabilityNote} (${timber.workability} workability).`);
            }

            // Finish explanation
            if (breakdown.finish === 5) {
                const finishLabel = questionLabels.finish[answers.finish].split(' - ')[0];
                explanations.push(`<strong>Finish Compatibility:</strong> Your choice of ${finishLabel.toLowerCase()} finish works perfectly with this timber, as it naturally accepts this type of finish beautifully.`);
            }

            return explanations.map(exp => `<p>${exp}</p>`).join('');
        }

        function generateComparison(result, allResults, allScores, currentRank) {
            if (currentRank >= allResults.length) return '';

            const nextResult = allResults[currentRank];
            const scoreDiff = result.percentage - nextResult.percentage;
            const currentTimber = result.timber;
            const nextTimber = nextResult.timber;

            let comparisonPoints = [];

            // Compare project type
            if (result.breakdown.project > nextResult.breakdown.project) {
                comparisonPoints.push(`${currentTimber.species} is specifically designed for ${questionLabels.project[answers.project].toLowerCase()}, while ${nextTimber.species} is better suited for other applications`);
            }

            // Compare colour match
            if (result.breakdown.colour > nextResult.breakdown.colour) {
                comparisonPoints.push(`${currentTimber.species} matches your preferred ${answers.colour} colour exactly, whereas ${nextTimber.species} is ${nextTimber.colour.toLowerCase()}`);
            }

            // Compare budget
            if (result.breakdown.budget > nextResult.breakdown.budget) {
                comparisonPoints.push(`${currentTimber.species} better aligns with your ${questionLabels.budget[answers.budget].toLowerCase()}`);
            }

            // Compare grain
            if (result.breakdown.grain > nextResult.breakdown.grain) {
                comparisonPoints.push(`the ${currentTimber.grainCharacter.toLowerCase()} grain pattern matches your preference, unlike ${nextTimber.species}'s ${nextTimber.grainCharacter.toLowerCase()} grain`);
            }

            // Compare experience
            if (result.breakdown.experience > nextResult.breakdown.experience) {
                comparisonPoints.push(`${currentTimber.species} is better suited to your ${answers.experience} skill level`);
            }

            // If no specific points, create a general comparison
            if (comparisonPoints.length === 0) {
                comparisonPoints.push(`${currentTimber.species} scored ${scoreDiff}% higher overall due to better alignment with your combined requirements`);
            }

            const comparisonText = comparisonPoints.slice(0, 2).join(', and ');

            return `
                <div class="comparison-section">
                    <h3>📊 How This Compares to ${nextTimber.species}</h3>
                    <p>${currentTimber.species} ranked ${scoreDiff}% higher than ${nextTimber.species} because ${comparisonText}. Both are excellent timbers, but ${currentTimber.species} provides a better overall match for your specific project needs.</p>
                </div>
            `;
        }

        function generateValidationPanel(results, allScores) {
            return `
                <div class="validation-panel">
                    <h2>✓ Does This Match Your Vision?</h2>
                    
                    <div class="requirements-summary">
                        <h3>Your Project Requirements</h3>
                        <div class="requirement-item">
                            <span class="requirement-label">Project Type:</span>
                            <span class="requirement-value">${questionLabels.project[answers.project]}</span>
                        </div>
                        <div class="requirement-item">
                            <span class="requirement-label">Budget:</span>
                            <span class="requirement-value">${questionLabels.budget[answers.budget]}</span>
                        </div>
                        <div class="requirement-item">
                            <span class="requirement-label">Colour Preference:</span>
                            <span class="requirement-value">${questionLabels.colour[answers.colour]}</span>
                        </div>
                        <div class="requirement-item">
                            <span class="requirement-label">Grain Character:</span>
                            <span class="requirement-value">${questionLabels.grain[answers.grain]}</span>
                        </div>
                        <div class="requirement-item">
                            <span class="requirement-label">Experience Level:</span>
                            <span class="requirement-value">${questionLabels.experience[answers.experience]}</span>
                        </div>
                        <div class="requirement-item">
                            <span class="requirement-label">Finish Type:</span>
                            <span class="requirement-value">${questionLabels.finish[answers.finish]}</span>
                        </div>
                    </div>

                    <h3 style="color: var(--primary-green); margin: 25px 0 15px 0;">Compatibility Matrix</h3>
                    <div class="compatibility-matrix">
                        <table class="matrix-table">
                            <thead>
                                <tr>
                                    <th>Timber</th>
                                    <th>Project</th>
                                    <th>Budget</th>
                                    <th>Colour</th>
                                    <th>Grain</th>
                                    <th>Experience</th>
                                    <th>Finish</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${results.map(result => `
                                    <tr>
                                        <td style="font-weight: 600; text-align: left;">${result.timber.species}</td>
                                        <td>${getMatchIcon(result.breakdown.project, 40)}</td>
                                        <td>${getMatchIcon(result.breakdown.budget, 25)}</td>
                                        <td>${getMatchIcon(result.breakdown.colour, 15)}</td>
                                        <td>${getMatchIcon(result.breakdown.grain, 10)}</td>
                                        <td>${getMatchIcon(result.breakdown.experience, 5)}</td>
                                        <td>${getMatchIcon(result.breakdown.finish, 5)}</td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    </div>

                    <div class="scoring-explanation">
                        <h3>How We Calculate Matches</h3>
                        <p style="margin-bottom: 15px;">Each timber is scored out of 100 points based on how well it matches your requirements:</p>
                        <div class="scoring-item">
                            <span>Project Type Match:</span>
                            <strong>40 points</strong>
                        </div>
                        <div class="scoring-item">
                            <span>Budget Compatibility:</span>
                            <strong>25 points</strong>
                        </div>
                        <div class="scoring-item">
                            <span>Colour Preference:</span>
                            <strong>15 points</strong>
                        </div>
                        <div class="scoring-item">
                            <span>Grain Character:</span>
                            <strong>10 points</strong>
                        </div>
                        <div class="scoring-item">
                            <span>Experience Level:</span>
                            <strong>5 points</strong>
                        </div>
                        <div class="scoring-item">
                            <span>Finish Compatibility:</span>
                            <strong>5 points</strong>
                        </div>
                    </div>

                    <div style="text-align: center; margin-top: 30px;">
                        <button class="btn btn-primary" onclick="startQuiz()" style="padding: 15px 40px; font-size: 1.1em;">
                            🔄 Try Different Options
                        </button>
                    </div>
                </div>
            `;
        }

        function getMatchIcon(score, maxScore) {
            const percentage = (score / maxScore) * 100;
            if (percentage === 100) {
                return '<span class="match-icon match-full">✓</span>';
            } else if (percentage >= 50) {
                return '<span class="match-icon match-partial">◐</span>';
            } else if (percentage > 0) {
                return '<span class="match-icon match-partial">○</span>';
            } else {
                return '<span class="match-icon match-none">✗</span>';
            }
        }

        // Start the quiz on page load
        startQuiz();
    </script>
</body>
</html>
